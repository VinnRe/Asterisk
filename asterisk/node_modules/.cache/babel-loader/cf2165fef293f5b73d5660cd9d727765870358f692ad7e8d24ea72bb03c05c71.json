{"ast":null,"code":"var _jsxFileName = \"D:\\\\Kobe\\\\univ_codes\\\\Github\\\\Asterisk\\\\asterisk\\\\src\\\\Components\\\\Pages\\\\meeting_page\\\\MeetingPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport '../../Styles/meet_styles.css';\nimport * as meetIcons from './imports';\nimport Clock from './clock';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const MeetingPage = () => {\n  _s();\n  const userID = window.crypto.randomUUID();\n\n  // create channel link \"?room=asdfafafgbn\"\n  const ws = new WebSocket(`ws://localhost:8000/ws/${userID}`);\n\n  // free stun server -- from google\n  const servers = {\n    iceServers: [{\n      urls: ['stun:stun1.l.google.com:19302', 'stun:stun2.l.google.com:19302']\n    }]\n  };\n  const localVideoRef = useRef(null);\n  const localAudioRef = useRef(null);\n  const remoteVideoRef = useRef(null);\n  const remoteAudioRef = useRef(null);\n  const [stream, setStream] = useState(null);\n  const [camStatus, setCamStatus] = useState('Hide Cam');\n  const [micStatus, setMicStatus] = useState('Mute Mic');\n  const [screenStatus, setScreenStatus] = useState('Share Screen');\n  const [screenShareStream, setScreenShareStream] = useState(null);\n  let localStream;\n  let remoteStream;\n  let pc;\n\n  // Function to toggle the camera stream\n  function toggleCamera() {\n    if (stream) {\n      const videoTrack = stream.getTracks().find(track => track.kind === 'video');\n      if (videoTrack.enabled) {\n        videoTrack.enabled = false;\n        setCamStatus('Show Cam');\n      } else {\n        videoTrack.enabled = true;\n        setCamStatus('Hide Cam');\n      }\n    }\n  }\n\n  // Function to toggle the microphone stream\n  function toggleMic() {\n    if (stream) {\n      const audioTrack = stream.getTracks().find(track => track.kind === 'audio');\n      if (audioTrack.enabled) {\n        audioTrack.enabled = false;\n        setMicStatus('Unmute Mic');\n      } else {\n        audioTrack.enabled = true;\n        setMicStatus('Mute Mic');\n      }\n    }\n  }\n\n  // Resize of button images\n  const imageSize = {\n    width: '2rem',\n    height: '2rem'\n  };\n  async function endStream() {\n    setScreenShareStream(null);\n    setScreenStatus(\"Share Screen\");\n    let screen_con = await document.getElementById(\"screenShare\");\n    screen_con.remove();\n  }\n  async function toggleScreenShare() {\n    // paresizee nalang tenks\n    try {\n      if (screenShareStream == null) {\n        const userScreen = await navigator.mediaDevices.getDisplayMedia({\n          cursor: true,\n          video: true,\n          audio: true\n        });\n        await setScreenShareStream(userScreen);\n        await setScreenStatus(\"Stop Sharing\");\n        let vid_con = document.getElementById(\"video-container\");\n        let screen_vid_con = document.createElement(\"video\");\n        screen_vid_con.setAttribute('id', 'screenShare');\n        screen_vid_con.setAttribute('playsInline', 'playsInline');\n        screen_vid_con.setAttribute('autoPlay', \"autoPlay\");\n        screen_vid_con.className = \"video-element\";\n        screen_vid_con.srcObject = userScreen;\n        vid_con.appendChild(screen_vid_con);\n      } else {\n        var tracks = await screenShareStream.getVideoTracks();\n        for (var i = 0; i < tracks.length; i++) {\n          tracks[i].stop();\n        }\n        endStream();\n      }\n    } catch (error) {\n      console.log(\"Error: \", error);\n    }\n  }\n  if (screenShareStream != null) {\n    screenShareStream.getVideoTracks()[0].addEventListener('ended', async () => {\n      endStream();\n    });\n  }\n  useEffect(() => {\n    function resizeVideoElements(videoRef, audioRef) {\n      if (videoRef.current && audioRef.current) {\n        const videoContainerWidth = videoRef.current.offsetWidth;\n        const videoContainerHeight = videoRef.current.offsetHeight;\n        const aspectRatio = 4 / 3; // You can adjust this based on your desired aspect ratio\n\n        // Calculate the width and height for the video elements\n        let videoWidth = videoContainerWidth;\n        let videoHeight = videoContainerWidth / aspectRatio;\n\n        // Check if the calculated video height exceeds the container height\n        if (videoHeight > videoContainerHeight) {\n          videoHeight = videoContainerHeight;\n          videoWidth = videoContainerHeight * aspectRatio;\n        }\n\n        // Set the width and height for video elements\n        videoRef.current.style.width = `${videoWidth}px`;\n        videoRef.current.style.height = `${videoHeight}px`;\n        audioRef.current.style.width = `${videoWidth}px`;\n        audioRef.current.style.height = `${videoHeight}px`;\n      }\n    }\n\n    // Call the resize function when the window is resized\n    window.addEventListener('resize', resizeVideoElements);\n\n    // Call the resize function on initial render\n    resizeVideoElements(localVideoRef, localAudioRef);\n    async function startStream() {\n      try {\n        localStream = await navigator.mediaDevices.getUserMedia({\n          video: true,\n          audio: true,\n          echoCancellation: true\n        });\n        setStream(localStream);\n\n        // Attach video localStream to the video element\n        if (localVideoRef.current) {\n          localVideoRef.current.srcObject = localStream;\n        }\n\n        // Attach audio localStream to the audio element\n        if (localAudioRef.current) {\n          localAudioRef.current.srcObject = localStream;\n        }\n        ws.onopen = function (event) {\n          console.log(\"Connection is open\");\n          console.log(userID, \"has arrived!\");\n          ws.send(JSON.stringify({\n            \"userID\": userID\n          }));\n        };\n        ws.onclose = function (event) {\n          console.log(\"Connection is closed\");\n        };\n        ws.onmessage = function (event) {\n          let obj = JSON.parse(event.data);\n          if (obj.type) {\n            if (obj.type === \"offer\") {\n              console.log(\"received offer!\");\n              createAnswer(userID, obj.offer);\n            } else if (obj.type === \"answer\") {\n              console.log(\"received answer!\");\n              addAnswer(obj.answer);\n            } else if (obj.type === \"candidate\") {\n              console.log(\"received candidate!\");\n              if (pc) {\n                pc.addIceCandidate(obj.candidate);\n              }\n            }\n          } else {\n            // another user has joined!!!\n            createOffer(userID);\n            console.log(obj.userID, \"has arrived!\");\n          }\n        };\n\n        // ws.onclose\n      } catch (error) {\n        console.error('Error accessing media devices: ', error);\n      }\n    }\n    async function createPeerConnection(userID) {\n      pc = new RTCPeerConnection(servers);\n      remoteStream = new MediaStream();\n      remoteVideoRef.current.srcObject = remoteStream;\n      remoteAudioRef.current.srcObject = remoteStream;\n      resizeVideoElements(remoteVideoRef, remoteAudioRef);\n      if (!localStream) {\n        localStream = await navigator.mediaDevices.getUserMedia({\n          video: true,\n          audio: false\n        });\n\n        // Attach video localStream to the video element\n        if (localVideoRef.current) {\n          localVideoRef.current.srcObject = localStream;\n        }\n\n        // Attach audio localStream to the audio element\n        if (localAudioRef.current) {\n          localAudioRef.current.srcObject = localStream;\n        }\n      }\n      localStream.getTracks().forEach(track => {\n        pc.addTrack(track, localStream);\n      });\n      pc.ontrack = event => {\n        event.streams[0].getTracks().forEach(track => {\n          remoteStream.addTrack(track);\n        });\n      };\n      pc.onicecandidate = async event => {\n        if (event.candidate) {\n          // console.log(event.candidate);\n          ws.send(JSON.stringify({\n            \"type\": \"candidate\",\n            \"candidate\": event.candidate\n          }));\n        }\n      };\n    }\n    async function createOffer(userID) {\n      await createPeerConnection(userID);\n      const offer = await pc.createOffer();\n      await pc.setLocalDescription(offer);\n\n      // send the offer to peer (offer, userID)\n      ws.send(JSON.stringify({\n        \"type\": \"offer\",\n        \"offer\": offer,\n        \"userID\": userID\n      }));\n    }\n    async function createAnswer(userID, offer) {\n      await createPeerConnection(userID);\n      await pc.setRemoteDescription(offer);\n      let answer = await pc.createAnswer();\n      await pc.setLocalDescription(answer);\n\n      // send back the answer to other peer (answer, userID)\n      ws.send(JSON.stringify({\n        \"type\": \"answer\",\n        \"answer\": answer,\n        \"userID\": userID\n      }));\n    }\n    async function addAnswer(answer) {\n      if (!pc.currentRemoteDescription) {\n        pc.setRemoteDescription(answer);\n      }\n    }\n    startStream();\n\n    // Cleanup the event listener when the component is unmounted\n    return () => {\n      window.removeEventListener('resize', resizeVideoElements);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"html\", {\n    className: \"html--m\",\n    children: /*#__PURE__*/_jsxDEV(\"body\", {\n      className: \"body--m\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"header\", {\n          className: \"meeting-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"h1--m\",\n            children: \"Asterisk - Video Meeting App\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"video-container\",\n            className: \"video-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"video\", {\n              ref: localVideoRef,\n              autoPlay: true,\n              playsInline: true,\n              className: \"video-element\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n              ref: localAudioRef,\n              autoPlay: true,\n              playsInline: true,\n              className: \"audio-element\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"button__control-panel\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"clock-content\",\n              children: /*#__PURE__*/_jsxDEV(Clock, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"toggle-button\",\n              onClick: toggleCamera,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"button-content\",\n                children: [camStatus === 'Hide Cam' ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: meetIcons.camOnIcon,\n                  alt: \"camOn\",\n                  style: imageSize\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 328,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: meetIcons.camOffIcon,\n                  alt: \"camOff\",\n                  style: imageSize\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 330,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: camStatus\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"toggle-button\",\n              onClick: toggleMic,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"button-content\",\n                children: [micStatus === 'Mute Mic' ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: meetIcons.micOnIcon,\n                  alt: \"micOn\",\n                  style: imageSize\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 338,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: meetIcons.micOffIcon,\n                  alt: \"micOff\",\n                  style: imageSize\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: micStatus\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 342,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"toggle-button\",\n              onClick: toggleScreenShare,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"button-content\",\n                children: [screenStatus === 'Share Screen' ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: meetIcons.shareScreenOnIcon,\n                  alt: \"shareScreenOn\",\n                  style: imageSize\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 348,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: meetIcons.shareScreenOffIcon,\n                  alt: \"shareScreenOff\",\n                  style: imageSize\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 350,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: screenStatus\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 352,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 346,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"toggle-button\",\n              onClick: true,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"button-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: meetIcons.raiseHandIcon,\n                  alt: \"raiseHandIcon\",\n                  style: imageSize\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 357,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Raise Hand\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 358,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 356,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"toggle-button\",\n              onClick: true,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"button-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: meetIcons.chatIcon,\n                  alt: \"chatIcon\",\n                  style: imageSize\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 363,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Open Chat\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"toggle-button\",\n              onClick: true,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"button-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: meetIcons.endCallIcon,\n                  alt: \"callEndIcon\",\n                  style: imageSize\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 369,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"End Call\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 308,\n    columnNumber: 5\n  }, this);\n};\n_s(MeetingPage, \"Mxwdhui0me9ls/a+Jbn5afomhWM=\");\n_c = MeetingPage;\nvar _c;\n$RefreshReg$(_c, \"MeetingPage\");","map":{"version":3,"names":["React","useEffect","useState","useRef","meetIcons","Clock","jsxDEV","_jsxDEV","MeetingPage","_s","userID","window","crypto","randomUUID","ws","WebSocket","servers","iceServers","urls","localVideoRef","localAudioRef","remoteVideoRef","remoteAudioRef","stream","setStream","camStatus","setCamStatus","micStatus","setMicStatus","screenStatus","setScreenStatus","screenShareStream","setScreenShareStream","localStream","remoteStream","pc","toggleCamera","videoTrack","getTracks","find","track","kind","enabled","toggleMic","audioTrack","imageSize","width","height","endStream","screen_con","document","getElementById","remove","toggleScreenShare","userScreen","navigator","mediaDevices","getDisplayMedia","cursor","video","audio","vid_con","screen_vid_con","createElement","setAttribute","className","srcObject","appendChild","tracks","getVideoTracks","i","length","stop","error","console","log","addEventListener","resizeVideoElements","videoRef","audioRef","current","videoContainerWidth","offsetWidth","videoContainerHeight","offsetHeight","aspectRatio","videoWidth","videoHeight","style","startStream","getUserMedia","echoCancellation","onopen","event","send","JSON","stringify","onclose","onmessage","obj","parse","data","type","createAnswer","offer","addAnswer","answer","addIceCandidate","candidate","createOffer","createPeerConnection","RTCPeerConnection","MediaStream","forEach","addTrack","ontrack","streams","onicecandidate","setLocalDescription","setRemoteDescription","currentRemoteDescription","removeEventListener","children","fileName","_jsxFileName","lineNumber","columnNumber","id","ref","autoPlay","playsInline","onClick","src","camOnIcon","alt","camOffIcon","micOnIcon","micOffIcon","shareScreenOnIcon","shareScreenOffIcon","raiseHandIcon","chatIcon","endCallIcon","_c","$RefreshReg$"],"sources":["D:/Kobe/univ_codes/Github/Asterisk/asterisk/src/Components/Pages/meeting_page/MeetingPage.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport '../../Styles/meet_styles.css';\r\nimport * as meetIcons from './imports';\r\nimport Clock from './clock';\r\n\r\nexport const MeetingPage = () => {\r\n\r\n  const userID = window.crypto.randomUUID();\r\n\r\n  // create channel link \"?room=asdfafafgbn\"\r\n  const ws = new WebSocket(`ws://localhost:8000/ws/${userID}`)\r\n\r\n  // free stun server -- from google\r\n  const servers = {\r\n    iceServers: [{\r\n      urls: ['stun:stun1.l.google.com:19302', 'stun:stun2.l.google.com:19302']\r\n    }]\r\n  }\r\n\r\n  const localVideoRef = useRef(null);\r\n  const localAudioRef = useRef(null);\r\n\r\n  const remoteVideoRef = useRef(null);\r\n  const remoteAudioRef = useRef(null);\r\n\r\n  const [stream, setStream] = useState(null);\r\n  const [camStatus, setCamStatus] = useState('Hide Cam');\r\n  const [micStatus, setMicStatus] = useState('Mute Mic');\r\n  const [screenStatus, setScreenStatus] = useState('Share Screen');\r\n  const [screenShareStream, setScreenShareStream] = useState(null);\r\n\r\n  let localStream;\r\n  let remoteStream;\r\n  let pc;\r\n\r\n  // Function to toggle the camera stream\r\n  function toggleCamera() {\r\n    if (stream) {\r\n      const videoTrack = stream.getTracks().find(track => track.kind === 'video');\r\n      if (videoTrack.enabled) {\r\n        videoTrack.enabled = false;\r\n        setCamStatus('Show Cam');\r\n      } else {\r\n        videoTrack.enabled = true;\r\n        setCamStatus('Hide Cam');\r\n      }\r\n    }\r\n  }\r\n\r\n  // Function to toggle the microphone stream\r\n  function toggleMic() {\r\n    if (stream) {\r\n      const audioTrack = stream.getTracks().find(track => track.kind === 'audio');\r\n      if (audioTrack.enabled) {\r\n        audioTrack.enabled = false;\r\n        setMicStatus('Unmute Mic');\r\n      } else {\r\n        audioTrack.enabled = true;\r\n        setMicStatus('Mute Mic');\r\n      }\r\n    }\r\n  }\r\n\r\n  // Resize of button images\r\n  const imageSize = {\r\n    width: '2rem',\r\n    height: '2rem',\r\n  };\r\n\r\n  async function endStream() {\r\n    setScreenShareStream(null);\r\n    setScreenStatus(\"Share Screen\");\r\n    let screen_con = await document.getElementById(\"screenShare\");\r\n    screen_con.remove();\r\n  }\r\n\r\n  async function toggleScreenShare() {\r\n    // paresizee nalang tenks\r\n    try {\r\n      if (screenShareStream == null) {\r\n        const userScreen = await navigator.mediaDevices.getDisplayMedia({\r\n          cursor:true,\r\n          video: true,\r\n          audio: true\r\n        })\r\n\r\n        await setScreenShareStream(userScreen);\r\n        await setScreenStatus(\"Stop Sharing\");\r\n\r\n        let vid_con = document.getElementById(\"video-container\");\r\n        let screen_vid_con = document.createElement(\"video\");\r\n        screen_vid_con.setAttribute('id', 'screenShare');\r\n        screen_vid_con.setAttribute('playsInline', 'playsInline');\r\n        screen_vid_con.setAttribute('autoPlay', \"autoPlay\");\r\n        screen_vid_con.className = \"video-element\";\r\n        screen_vid_con.srcObject = userScreen;\r\n        vid_con.appendChild(screen_vid_con);\r\n      } else {\r\n        var tracks = await screenShareStream.getVideoTracks();\r\n        for (var i = 0; i < tracks.length; i++) {\r\n          tracks[i].stop();\r\n        }\r\n        endStream();  \r\n      }\r\n\r\n    } catch (error) {\r\n      console.log(\"Error: \", error);\r\n    }\r\n  }\r\n\r\n  if (screenShareStream != null) {\r\n    screenShareStream.getVideoTracks()[0].addEventListener('ended', async () => {\r\n      endStream();  \r\n    });\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n\r\n    function resizeVideoElements(videoRef, audioRef) {\r\n      if (videoRef.current && audioRef.current) {\r\n        const videoContainerWidth = videoRef.current.offsetWidth;\r\n        const videoContainerHeight = videoRef.current.offsetHeight;\r\n        const aspectRatio = 4 / 3; // You can adjust this based on your desired aspect ratio\r\n\r\n        // Calculate the width and height for the video elements\r\n        let videoWidth = videoContainerWidth;\r\n        let videoHeight = videoContainerWidth / aspectRatio;\r\n\r\n        // Check if the calculated video height exceeds the container height\r\n        if (videoHeight > videoContainerHeight) {\r\n            videoHeight = videoContainerHeight;\r\n            videoWidth = videoContainerHeight * aspectRatio;\r\n        }\r\n\r\n        // Set the width and height for video elements\r\n        videoRef.current.style.width = `${videoWidth}px`;\r\n        videoRef.current.style.height = `${videoHeight}px`;\r\n        audioRef.current.style.width = `${videoWidth}px`;\r\n        audioRef.current.style.height = `${videoHeight}px`;\r\n      }\r\n    }\r\n\r\n    // Call the resize function when the window is resized\r\n    window.addEventListener('resize', resizeVideoElements);\r\n\r\n    // Call the resize function on initial render\r\n    resizeVideoElements(localVideoRef, localAudioRef);\r\n\r\n\r\n    async function startStream() {\r\n      try {\r\n        localStream = await navigator.mediaDevices.getUserMedia({\r\n          video: true, \r\n          audio: true,\r\n          echoCancellation: true\r\n        });\r\n\r\n        setStream(localStream);\r\n\r\n        // Attach video localStream to the video element\r\n        if (localVideoRef.current) {\r\n          localVideoRef.current.srcObject = localStream;\r\n        }\r\n\r\n        // Attach audio localStream to the audio element\r\n        if (localAudioRef.current) {\r\n          localAudioRef.current.srcObject = localStream;\r\n        }\r\n\r\n        ws.onopen = function(event) {\r\n          console.log(\"Connection is open\");\r\n          console.log(userID, \"has arrived!\");\r\n\r\n          ws.send(JSON.stringify({\"userID\":userID}));\r\n        }\r\n\r\n        ws.onclose = function(event) {\r\n          console.log(\"Connection is closed\");\r\n        }\r\n\r\n        ws.onmessage = function(event) {\r\n\r\n          let obj = JSON.parse(event.data);\r\n\r\n          if (obj.type) {\r\n            if (obj.type === \"offer\") {\r\n              console.log(\"received offer!\");\r\n              createAnswer(userID, obj.offer);\r\n            } else if (obj.type === \"answer\") {\r\n              console.log(\"received answer!\");\r\n              addAnswer(obj.answer);\r\n            } else if (obj.type === \"candidate\") {\r\n              console.log(\"received candidate!\");\r\n              if (pc) {\r\n                pc.addIceCandidate(obj.candidate)\r\n              }\r\n            }\r\n          } else {\r\n            // another user has joined!!!\r\n            createOffer(userID);\r\n            console.log(obj.userID, \"has arrived!\");\r\n          }\r\n        }\r\n\r\n        // ws.onclose\r\n\r\n      } catch (error) {\r\n        console.error('Error accessing media devices: ', error);\r\n      }\r\n    }\r\n\r\n    async function createPeerConnection(userID) {\r\n      pc = new RTCPeerConnection(servers);\r\n\r\n      remoteStream = new MediaStream();\r\n      remoteVideoRef.current.srcObject = remoteStream;\r\n      remoteAudioRef.current.srcObject = remoteStream;\r\n\r\n      resizeVideoElements(remoteVideoRef, remoteAudioRef);\r\n\r\n\r\n      if (!localStream) {\r\n        localStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: false });\r\n\r\n        // Attach video localStream to the video element\r\n        if (localVideoRef.current) {\r\n          localVideoRef.current.srcObject = localStream;\r\n        }\r\n\r\n        // Attach audio localStream to the audio element\r\n        if (localAudioRef.current) {\r\n          localAudioRef.current.srcObject = localStream;\r\n        }\r\n      }\r\n\r\n      localStream.getTracks().forEach((track) => {\r\n        pc.addTrack(track, localStream)\r\n      })\r\n\r\n      pc.ontrack = (event) => {\r\n        event.streams[0].getTracks().forEach((track) => {\r\n          remoteStream.addTrack(track)\r\n        })\r\n      }\r\n\r\n      pc.onicecandidate = async (event) => {\r\n        if (event.candidate) {\r\n          // console.log(event.candidate);\r\n          ws.send(JSON.stringify({\r\n            \"type\":\"candidate\", \r\n            \"candidate\":event.candidate\r\n          }))\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n    async function createOffer(userID) {\r\n\r\n      await createPeerConnection(userID);\r\n\r\n      const offer = await pc.createOffer();\r\n      await pc.setLocalDescription(offer);\r\n\r\n\r\n      // send the offer to peer (offer, userID)\r\n      ws.send(JSON.stringify({\r\n        \"type\":\"offer\", \r\n        \"offer\":offer,\r\n        \"userID\": userID\r\n      }))\r\n    }\r\n\r\n    async function createAnswer(userID, offer) {\r\n      await createPeerConnection(userID);\r\n\r\n      await pc.setRemoteDescription(offer);\r\n\r\n      let answer = await pc.createAnswer();\r\n      await pc.setLocalDescription(answer);\r\n\r\n      // send back the answer to other peer (answer, userID)\r\n      ws.send(JSON.stringify({\r\n        \"type\":\"answer\",\r\n        \"answer\":answer,\r\n        \"userID\":userID\r\n      }))\r\n    }\r\n\r\n    async function addAnswer(answer) {\r\n      if (!pc.currentRemoteDescription) {\r\n        pc.setRemoteDescription(answer)\r\n      }\r\n    }\r\n\r\n\r\n    startStream();\r\n\r\n    // Cleanup the event listener when the component is unmounted\r\n    return () => {\r\n      window.removeEventListener('resize', resizeVideoElements);\r\n    };\r\n\r\n  }, []);\r\n\r\n  return (\r\n    <html className='html--m'>\r\n      <body className='body--m'>\r\n        <div className=\"container\">\r\n          <header className=\"meeting-header\">\r\n            <h1 className='h1--m'>Asterisk - Video Meeting App</h1>\r\n            <div id=\"video-container\" className=\"video-container\">\r\n              {/* Add video elements here */}\r\n              <video ref={localVideoRef} autoPlay playsInline className=\"video-element\"></video>\r\n              <audio ref={localAudioRef} autoPlay playsInline className=\"audio-element\"></audio>\r\n\r\n              {/* <video ref={remoteVideoRef} autoPlay playsInline className=\"video-element\"></video>\r\n              <audio ref={remoteAudioRef} autoPlay playsInline className=\"audio-element\"></audio> */}\r\n            </div>\r\n            <div className=\"button__control-panel\">\r\n                <div className=\"clock-content\">\r\n                  <Clock />\r\n                </div>\r\n                <button className=\"toggle-button\" onClick={toggleCamera}>\r\n                  <div className=\"button-content\">\r\n                    {camStatus === 'Hide Cam' ? (\r\n                      <img src={meetIcons.camOnIcon} alt='camOn' style={imageSize} />\r\n                    ) : (\r\n                      <img src={meetIcons.camOffIcon} alt='camOff' style={imageSize} />\r\n                    )} \r\n                    <span>{camStatus}</span>\r\n                  </div>\r\n                </button>\r\n                <button className=\"toggle-button\" onClick={toggleMic}>\r\n                  <div className=\"button-content\">\r\n                    {micStatus === 'Mute Mic' ? (\r\n                      <img src={meetIcons.micOnIcon} alt='micOn' style={imageSize} />\r\n                    ) : (\r\n                      <img src={meetIcons.micOffIcon} alt='micOff' style={imageSize} />\r\n                    )} \r\n                    <span>{micStatus}</span>\r\n                  </div>\r\n                </button>\r\n                <button className=\"toggle-button\" onClick={toggleScreenShare}>\r\n                  <div className=\"button-content\">\r\n                    {screenStatus === 'Share Screen' ? (\r\n                      <img src={meetIcons.shareScreenOnIcon} alt='shareScreenOn' style={imageSize} />\r\n                    ) : (\r\n                      <img src={meetIcons.shareScreenOffIcon} alt='shareScreenOff' style={imageSize} />\r\n                    )} \r\n                    <span>{screenStatus}</span>\r\n                  </div>\r\n                </button>\r\n                <button className=\"toggle-button\" onClick>\r\n                  <div className=\"button-content\">\r\n                    <img src={meetIcons.raiseHandIcon} alt=\"raiseHandIcon\" style={imageSize} />\r\n                    <span>Raise Hand</span>\r\n                  </div>\r\n                </button>\r\n                <button className=\"toggle-button\" onClick>\r\n                  <div className=\"button-content\">\r\n                    <img src={meetIcons.chatIcon} alt=\"chatIcon\" style={imageSize} />\r\n                    <span>Open Chat</span>\r\n                  </div>\r\n                </button>\r\n                <button className=\"toggle-button\" onClick>\r\n                    <div className=\"button-content\">\r\n                      <img src={meetIcons.endCallIcon} alt=\"callEndIcon\" style={imageSize} />\r\n                      <span>End Call</span>\r\n                    </div>\r\n                </button>\r\n            </div>\r\n          </header>\r\n        </div>\r\n      </body>\r\n    </html>\r\n  );\r\n};\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,MAAM,QAAQ,OAAO;AAC1D,OAAO,8BAA8B;AACrC,OAAO,KAAKC,SAAS,MAAM,WAAW;AACtC,OAAOC,KAAK,MAAM,SAAS;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5B,OAAO,MAAMC,WAAW,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAE/B,MAAMC,MAAM,GAAGC,MAAM,CAACC,MAAM,CAACC,UAAU,CAAC,CAAC;;EAEzC;EACA,MAAMC,EAAE,GAAG,IAAIC,SAAS,CAAE,0BAAyBL,MAAO,EAAC,CAAC;;EAE5D;EACA,MAAMM,OAAO,GAAG;IACdC,UAAU,EAAE,CAAC;MACXC,IAAI,EAAE,CAAC,+BAA+B,EAAE,+BAA+B;IACzE,CAAC;EACH,CAAC;EAED,MAAMC,aAAa,GAAGhB,MAAM,CAAC,IAAI,CAAC;EAClC,MAAMiB,aAAa,GAAGjB,MAAM,CAAC,IAAI,CAAC;EAElC,MAAMkB,cAAc,GAAGlB,MAAM,CAAC,IAAI,CAAC;EACnC,MAAMmB,cAAc,GAAGnB,MAAM,CAAC,IAAI,CAAC;EAEnC,MAAM,CAACoB,MAAM,EAAEC,SAAS,CAAC,GAAGtB,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACuB,SAAS,EAAEC,YAAY,CAAC,GAAGxB,QAAQ,CAAC,UAAU,CAAC;EACtD,MAAM,CAACyB,SAAS,EAAEC,YAAY,CAAC,GAAG1B,QAAQ,CAAC,UAAU,CAAC;EACtD,MAAM,CAAC2B,YAAY,EAAEC,eAAe,CAAC,GAAG5B,QAAQ,CAAC,cAAc,CAAC;EAChE,MAAM,CAAC6B,iBAAiB,EAAEC,oBAAoB,CAAC,GAAG9B,QAAQ,CAAC,IAAI,CAAC;EAEhE,IAAI+B,WAAW;EACf,IAAIC,YAAY;EAChB,IAAIC,EAAE;;EAEN;EACA,SAASC,YAAYA,CAAA,EAAG;IACtB,IAAIb,MAAM,EAAE;MACV,MAAMc,UAAU,GAAGd,MAAM,CAACe,SAAS,CAAC,CAAC,CAACC,IAAI,CAACC,KAAK,IAAIA,KAAK,CAACC,IAAI,KAAK,OAAO,CAAC;MAC3E,IAAIJ,UAAU,CAACK,OAAO,EAAE;QACtBL,UAAU,CAACK,OAAO,GAAG,KAAK;QAC1BhB,YAAY,CAAC,UAAU,CAAC;MAC1B,CAAC,MAAM;QACLW,UAAU,CAACK,OAAO,GAAG,IAAI;QACzBhB,YAAY,CAAC,UAAU,CAAC;MAC1B;IACF;EACF;;EAEA;EACA,SAASiB,SAASA,CAAA,EAAG;IACnB,IAAIpB,MAAM,EAAE;MACV,MAAMqB,UAAU,GAAGrB,MAAM,CAACe,SAAS,CAAC,CAAC,CAACC,IAAI,CAACC,KAAK,IAAIA,KAAK,CAACC,IAAI,KAAK,OAAO,CAAC;MAC3E,IAAIG,UAAU,CAACF,OAAO,EAAE;QACtBE,UAAU,CAACF,OAAO,GAAG,KAAK;QAC1Bd,YAAY,CAAC,YAAY,CAAC;MAC5B,CAAC,MAAM;QACLgB,UAAU,CAACF,OAAO,GAAG,IAAI;QACzBd,YAAY,CAAC,UAAU,CAAC;MAC1B;IACF;EACF;;EAEA;EACA,MAAMiB,SAAS,GAAG;IAChBC,KAAK,EAAE,MAAM;IACbC,MAAM,EAAE;EACV,CAAC;EAED,eAAeC,SAASA,CAAA,EAAG;IACzBhB,oBAAoB,CAAC,IAAI,CAAC;IAC1BF,eAAe,CAAC,cAAc,CAAC;IAC/B,IAAImB,UAAU,GAAG,MAAMC,QAAQ,CAACC,cAAc,CAAC,aAAa,CAAC;IAC7DF,UAAU,CAACG,MAAM,CAAC,CAAC;EACrB;EAEA,eAAeC,iBAAiBA,CAAA,EAAG;IACjC;IACA,IAAI;MACF,IAAItB,iBAAiB,IAAI,IAAI,EAAE;QAC7B,MAAMuB,UAAU,GAAG,MAAMC,SAAS,CAACC,YAAY,CAACC,eAAe,CAAC;UAC9DC,MAAM,EAAC,IAAI;UACXC,KAAK,EAAE,IAAI;UACXC,KAAK,EAAE;QACT,CAAC,CAAC;QAEF,MAAM5B,oBAAoB,CAACsB,UAAU,CAAC;QACtC,MAAMxB,eAAe,CAAC,cAAc,CAAC;QAErC,IAAI+B,OAAO,GAAGX,QAAQ,CAACC,cAAc,CAAC,iBAAiB,CAAC;QACxD,IAAIW,cAAc,GAAGZ,QAAQ,CAACa,aAAa,CAAC,OAAO,CAAC;QACpDD,cAAc,CAACE,YAAY,CAAC,IAAI,EAAE,aAAa,CAAC;QAChDF,cAAc,CAACE,YAAY,CAAC,aAAa,EAAE,aAAa,CAAC;QACzDF,cAAc,CAACE,YAAY,CAAC,UAAU,EAAE,UAAU,CAAC;QACnDF,cAAc,CAACG,SAAS,GAAG,eAAe;QAC1CH,cAAc,CAACI,SAAS,GAAGZ,UAAU;QACrCO,OAAO,CAACM,WAAW,CAACL,cAAc,CAAC;MACrC,CAAC,MAAM;QACL,IAAIM,MAAM,GAAG,MAAMrC,iBAAiB,CAACsC,cAAc,CAAC,CAAC;QACrD,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,MAAM,CAACG,MAAM,EAAED,CAAC,EAAE,EAAE;UACtCF,MAAM,CAACE,CAAC,CAAC,CAACE,IAAI,CAAC,CAAC;QAClB;QACAxB,SAAS,CAAC,CAAC;MACb;IAEF,CAAC,CAAC,OAAOyB,KAAK,EAAE;MACdC,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEF,KAAK,CAAC;IAC/B;EACF;EAEA,IAAI1C,iBAAiB,IAAI,IAAI,EAAE;IAC7BA,iBAAiB,CAACsC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAACO,gBAAgB,CAAC,OAAO,EAAE,YAAY;MAC1E5B,SAAS,CAAC,CAAC;IACb,CAAC,CAAC;EACJ;EAGA/C,SAAS,CAAC,MAAM;IAEd,SAAS4E,mBAAmBA,CAACC,QAAQ,EAAEC,QAAQ,EAAE;MAC/C,IAAID,QAAQ,CAACE,OAAO,IAAID,QAAQ,CAACC,OAAO,EAAE;QACxC,MAAMC,mBAAmB,GAAGH,QAAQ,CAACE,OAAO,CAACE,WAAW;QACxD,MAAMC,oBAAoB,GAAGL,QAAQ,CAACE,OAAO,CAACI,YAAY;QAC1D,MAAMC,WAAW,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;;QAE3B;QACA,IAAIC,UAAU,GAAGL,mBAAmB;QACpC,IAAIM,WAAW,GAAGN,mBAAmB,GAAGI,WAAW;;QAEnD;QACA,IAAIE,WAAW,GAAGJ,oBAAoB,EAAE;UACpCI,WAAW,GAAGJ,oBAAoB;UAClCG,UAAU,GAAGH,oBAAoB,GAAGE,WAAW;QACnD;;QAEA;QACAP,QAAQ,CAACE,OAAO,CAACQ,KAAK,CAAC1C,KAAK,GAAI,GAAEwC,UAAW,IAAG;QAChDR,QAAQ,CAACE,OAAO,CAACQ,KAAK,CAACzC,MAAM,GAAI,GAAEwC,WAAY,IAAG;QAClDR,QAAQ,CAACC,OAAO,CAACQ,KAAK,CAAC1C,KAAK,GAAI,GAAEwC,UAAW,IAAG;QAChDP,QAAQ,CAACC,OAAO,CAACQ,KAAK,CAACzC,MAAM,GAAI,GAAEwC,WAAY,IAAG;MACpD;IACF;;IAEA;IACA5E,MAAM,CAACiE,gBAAgB,CAAC,QAAQ,EAAEC,mBAAmB,CAAC;;IAEtD;IACAA,mBAAmB,CAAC1D,aAAa,EAAEC,aAAa,CAAC;IAGjD,eAAeqE,WAAWA,CAAA,EAAG;MAC3B,IAAI;QACFxD,WAAW,GAAG,MAAMsB,SAAS,CAACC,YAAY,CAACkC,YAAY,CAAC;UACtD/B,KAAK,EAAE,IAAI;UACXC,KAAK,EAAE,IAAI;UACX+B,gBAAgB,EAAE;QACpB,CAAC,CAAC;QAEFnE,SAAS,CAACS,WAAW,CAAC;;QAEtB;QACA,IAAId,aAAa,CAAC6D,OAAO,EAAE;UACzB7D,aAAa,CAAC6D,OAAO,CAACd,SAAS,GAAGjC,WAAW;QAC/C;;QAEA;QACA,IAAIb,aAAa,CAAC4D,OAAO,EAAE;UACzB5D,aAAa,CAAC4D,OAAO,CAACd,SAAS,GAAGjC,WAAW;QAC/C;QAEAnB,EAAE,CAAC8E,MAAM,GAAG,UAASC,KAAK,EAAE;UAC1BnB,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC;UACjCD,OAAO,CAACC,GAAG,CAACjE,MAAM,EAAE,cAAc,CAAC;UAEnCI,EAAE,CAACgF,IAAI,CAACC,IAAI,CAACC,SAAS,CAAC;YAAC,QAAQ,EAACtF;UAAM,CAAC,CAAC,CAAC;QAC5C,CAAC;QAEDI,EAAE,CAACmF,OAAO,GAAG,UAASJ,KAAK,EAAE;UAC3BnB,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;QACrC,CAAC;QAED7D,EAAE,CAACoF,SAAS,GAAG,UAASL,KAAK,EAAE;UAE7B,IAAIM,GAAG,GAAGJ,IAAI,CAACK,KAAK,CAACP,KAAK,CAACQ,IAAI,CAAC;UAEhC,IAAIF,GAAG,CAACG,IAAI,EAAE;YACZ,IAAIH,GAAG,CAACG,IAAI,KAAK,OAAO,EAAE;cACxB5B,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC;cAC9B4B,YAAY,CAAC7F,MAAM,EAAEyF,GAAG,CAACK,KAAK,CAAC;YACjC,CAAC,MAAM,IAAIL,GAAG,CAACG,IAAI,KAAK,QAAQ,EAAE;cAChC5B,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;cAC/B8B,SAAS,CAACN,GAAG,CAACO,MAAM,CAAC;YACvB,CAAC,MAAM,IAAIP,GAAG,CAACG,IAAI,KAAK,WAAW,EAAE;cACnC5B,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;cAClC,IAAIxC,EAAE,EAAE;gBACNA,EAAE,CAACwE,eAAe,CAACR,GAAG,CAACS,SAAS,CAAC;cACnC;YACF;UACF,CAAC,MAAM;YACL;YACAC,WAAW,CAACnG,MAAM,CAAC;YACnBgE,OAAO,CAACC,GAAG,CAACwB,GAAG,CAACzF,MAAM,EAAE,cAAc,CAAC;UACzC;QACF,CAAC;;QAED;MAEF,CAAC,CAAC,OAAO+D,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;MACzD;IACF;IAEA,eAAeqC,oBAAoBA,CAACpG,MAAM,EAAE;MAC1CyB,EAAE,GAAG,IAAI4E,iBAAiB,CAAC/F,OAAO,CAAC;MAEnCkB,YAAY,GAAG,IAAI8E,WAAW,CAAC,CAAC;MAChC3F,cAAc,CAAC2D,OAAO,CAACd,SAAS,GAAGhC,YAAY;MAC/CZ,cAAc,CAAC0D,OAAO,CAACd,SAAS,GAAGhC,YAAY;MAE/C2C,mBAAmB,CAACxD,cAAc,EAAEC,cAAc,CAAC;MAGnD,IAAI,CAACW,WAAW,EAAE;QAChBA,WAAW,GAAG,MAAMsB,SAAS,CAACC,YAAY,CAACkC,YAAY,CAAC;UAAE/B,KAAK,EAAE,IAAI;UAAEC,KAAK,EAAE;QAAM,CAAC,CAAC;;QAEtF;QACA,IAAIzC,aAAa,CAAC6D,OAAO,EAAE;UACzB7D,aAAa,CAAC6D,OAAO,CAACd,SAAS,GAAGjC,WAAW;QAC/C;;QAEA;QACA,IAAIb,aAAa,CAAC4D,OAAO,EAAE;UACzB5D,aAAa,CAAC4D,OAAO,CAACd,SAAS,GAAGjC,WAAW;QAC/C;MACF;MAEAA,WAAW,CAACK,SAAS,CAAC,CAAC,CAAC2E,OAAO,CAAEzE,KAAK,IAAK;QACzCL,EAAE,CAAC+E,QAAQ,CAAC1E,KAAK,EAAEP,WAAW,CAAC;MACjC,CAAC,CAAC;MAEFE,EAAE,CAACgF,OAAO,GAAItB,KAAK,IAAK;QACtBA,KAAK,CAACuB,OAAO,CAAC,CAAC,CAAC,CAAC9E,SAAS,CAAC,CAAC,CAAC2E,OAAO,CAAEzE,KAAK,IAAK;UAC9CN,YAAY,CAACgF,QAAQ,CAAC1E,KAAK,CAAC;QAC9B,CAAC,CAAC;MACJ,CAAC;MAEDL,EAAE,CAACkF,cAAc,GAAG,MAAOxB,KAAK,IAAK;QACnC,IAAIA,KAAK,CAACe,SAAS,EAAE;UACnB;UACA9F,EAAE,CAACgF,IAAI,CAACC,IAAI,CAACC,SAAS,CAAC;YACrB,MAAM,EAAC,WAAW;YAClB,WAAW,EAACH,KAAK,CAACe;UACpB,CAAC,CAAC,CAAC;QACL;MACF,CAAC;IACH;IAGA,eAAeC,WAAWA,CAACnG,MAAM,EAAE;MAEjC,MAAMoG,oBAAoB,CAACpG,MAAM,CAAC;MAElC,MAAM8F,KAAK,GAAG,MAAMrE,EAAE,CAAC0E,WAAW,CAAC,CAAC;MACpC,MAAM1E,EAAE,CAACmF,mBAAmB,CAACd,KAAK,CAAC;;MAGnC;MACA1F,EAAE,CAACgF,IAAI,CAACC,IAAI,CAACC,SAAS,CAAC;QACrB,MAAM,EAAC,OAAO;QACd,OAAO,EAACQ,KAAK;QACb,QAAQ,EAAE9F;MACZ,CAAC,CAAC,CAAC;IACL;IAEA,eAAe6F,YAAYA,CAAC7F,MAAM,EAAE8F,KAAK,EAAE;MACzC,MAAMM,oBAAoB,CAACpG,MAAM,CAAC;MAElC,MAAMyB,EAAE,CAACoF,oBAAoB,CAACf,KAAK,CAAC;MAEpC,IAAIE,MAAM,GAAG,MAAMvE,EAAE,CAACoE,YAAY,CAAC,CAAC;MACpC,MAAMpE,EAAE,CAACmF,mBAAmB,CAACZ,MAAM,CAAC;;MAEpC;MACA5F,EAAE,CAACgF,IAAI,CAACC,IAAI,CAACC,SAAS,CAAC;QACrB,MAAM,EAAC,QAAQ;QACf,QAAQ,EAACU,MAAM;QACf,QAAQ,EAAChG;MACX,CAAC,CAAC,CAAC;IACL;IAEA,eAAe+F,SAASA,CAACC,MAAM,EAAE;MAC/B,IAAI,CAACvE,EAAE,CAACqF,wBAAwB,EAAE;QAChCrF,EAAE,CAACoF,oBAAoB,CAACb,MAAM,CAAC;MACjC;IACF;IAGAjB,WAAW,CAAC,CAAC;;IAEb;IACA,OAAO,MAAM;MACX9E,MAAM,CAAC8G,mBAAmB,CAAC,QAAQ,EAAE5C,mBAAmB,CAAC;IAC3D,CAAC;EAEH,CAAC,EAAE,EAAE,CAAC;EAEN,oBACEtE,OAAA;IAAM0D,SAAS,EAAC,SAAS;IAAAyD,QAAA,eACvBnH,OAAA;MAAM0D,SAAS,EAAC,SAAS;MAAAyD,QAAA,eACvBnH,OAAA;QAAK0D,SAAS,EAAC,WAAW;QAAAyD,QAAA,eACxBnH,OAAA;UAAQ0D,SAAS,EAAC,gBAAgB;UAAAyD,QAAA,gBAChCnH,OAAA;YAAI0D,SAAS,EAAC,OAAO;YAAAyD,QAAA,EAAC;UAA4B;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACvDvH,OAAA;YAAKwH,EAAE,EAAC,iBAAiB;YAAC9D,SAAS,EAAC,iBAAiB;YAAAyD,QAAA,gBAEnDnH,OAAA;cAAOyH,GAAG,EAAE7G,aAAc;cAAC8G,QAAQ;cAACC,WAAW;cAACjE,SAAS,EAAC;YAAe;cAAA0D,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAClFvH,OAAA;cAAOyH,GAAG,EAAE5G,aAAc;cAAC6G,QAAQ;cAACC,WAAW;cAACjE,SAAS,EAAC;YAAe;cAAA0D,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAI/E,CAAC,eACNvH,OAAA;YAAK0D,SAAS,EAAC,uBAAuB;YAAAyD,QAAA,gBAClCnH,OAAA;cAAK0D,SAAS,EAAC,eAAe;cAAAyD,QAAA,eAC5BnH,OAAA,CAACF,KAAK;gBAAAsH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC,eACNvH,OAAA;cAAQ0D,SAAS,EAAC,eAAe;cAACkE,OAAO,EAAE/F,YAAa;cAAAsF,QAAA,eACtDnH,OAAA;gBAAK0D,SAAS,EAAC,gBAAgB;gBAAAyD,QAAA,GAC5BjG,SAAS,KAAK,UAAU,gBACvBlB,OAAA;kBAAK6H,GAAG,EAAEhI,SAAS,CAACiI,SAAU;kBAACC,GAAG,EAAC,OAAO;kBAAC9C,KAAK,EAAE3C;gBAAU;kBAAA8E,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,gBAE/DvH,OAAA;kBAAK6H,GAAG,EAAEhI,SAAS,CAACmI,UAAW;kBAACD,GAAG,EAAC,QAAQ;kBAAC9C,KAAK,EAAE3C;gBAAU;kBAAA8E,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CACjE,eACDvH,OAAA;kBAAAmH,QAAA,EAAOjG;gBAAS;kBAAAkG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACrB;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACA,CAAC,eACTvH,OAAA;cAAQ0D,SAAS,EAAC,eAAe;cAACkE,OAAO,EAAExF,SAAU;cAAA+E,QAAA,eACnDnH,OAAA;gBAAK0D,SAAS,EAAC,gBAAgB;gBAAAyD,QAAA,GAC5B/F,SAAS,KAAK,UAAU,gBACvBpB,OAAA;kBAAK6H,GAAG,EAAEhI,SAAS,CAACoI,SAAU;kBAACF,GAAG,EAAC,OAAO;kBAAC9C,KAAK,EAAE3C;gBAAU;kBAAA8E,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,gBAE/DvH,OAAA;kBAAK6H,GAAG,EAAEhI,SAAS,CAACqI,UAAW;kBAACH,GAAG,EAAC,QAAQ;kBAAC9C,KAAK,EAAE3C;gBAAU;kBAAA8E,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CACjE,eACDvH,OAAA;kBAAAmH,QAAA,EAAO/F;gBAAS;kBAAAgG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACrB;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACA,CAAC,eACTvH,OAAA;cAAQ0D,SAAS,EAAC,eAAe;cAACkE,OAAO,EAAE9E,iBAAkB;cAAAqE,QAAA,eAC3DnH,OAAA;gBAAK0D,SAAS,EAAC,gBAAgB;gBAAAyD,QAAA,GAC5B7F,YAAY,KAAK,cAAc,gBAC9BtB,OAAA;kBAAK6H,GAAG,EAAEhI,SAAS,CAACsI,iBAAkB;kBAACJ,GAAG,EAAC,eAAe;kBAAC9C,KAAK,EAAE3C;gBAAU;kBAAA8E,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,gBAE/EvH,OAAA;kBAAK6H,GAAG,EAAEhI,SAAS,CAACuI,kBAAmB;kBAACL,GAAG,EAAC,gBAAgB;kBAAC9C,KAAK,EAAE3C;gBAAU;kBAAA8E,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CACjF,eACDvH,OAAA;kBAAAmH,QAAA,EAAO7F;gBAAY;kBAAA8F,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACxB;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACA,CAAC,eACTvH,OAAA;cAAQ0D,SAAS,EAAC,eAAe;cAACkE,OAAO;cAAAT,QAAA,eACvCnH,OAAA;gBAAK0D,SAAS,EAAC,gBAAgB;gBAAAyD,QAAA,gBAC7BnH,OAAA;kBAAK6H,GAAG,EAAEhI,SAAS,CAACwI,aAAc;kBAACN,GAAG,EAAC,eAAe;kBAAC9C,KAAK,EAAE3C;gBAAU;kBAAA8E,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eAC3EvH,OAAA;kBAAAmH,QAAA,EAAM;gBAAU;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACpB;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACA,CAAC,eACTvH,OAAA;cAAQ0D,SAAS,EAAC,eAAe;cAACkE,OAAO;cAAAT,QAAA,eACvCnH,OAAA;gBAAK0D,SAAS,EAAC,gBAAgB;gBAAAyD,QAAA,gBAC7BnH,OAAA;kBAAK6H,GAAG,EAAEhI,SAAS,CAACyI,QAAS;kBAACP,GAAG,EAAC,UAAU;kBAAC9C,KAAK,EAAE3C;gBAAU;kBAAA8E,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eACjEvH,OAAA;kBAAAmH,QAAA,EAAM;gBAAS;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACnB;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACA,CAAC,eACTvH,OAAA;cAAQ0D,SAAS,EAAC,eAAe;cAACkE,OAAO;cAAAT,QAAA,eACrCnH,OAAA;gBAAK0D,SAAS,EAAC,gBAAgB;gBAAAyD,QAAA,gBAC7BnH,OAAA;kBAAK6H,GAAG,EAAEhI,SAAS,CAAC0I,WAAY;kBAACR,GAAG,EAAC,aAAa;kBAAC9C,KAAK,EAAE3C;gBAAU;kBAAA8E,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eACvEvH,OAAA;kBAAAmH,QAAA,EAAM;gBAAQ;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAClB;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACF,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACR,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEX,CAAC;AAACrH,EAAA,CArXWD,WAAW;AAAAuI,EAAA,GAAXvI,WAAW;AAAA,IAAAuI,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}